<!DOCTYPE html>
<!-- LICENSE: https://polyformproject.org/licenses/strict/1.0.0/ -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Stixu Stick Diagrammer</title>
    <script src="https://kit.fontawesome.com/039fa42282.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://nturley.github.io/netlistsvg/elk.bundled.js"></script>
    <script type="text/javascript" src="https://nturley.github.io/netlistsvg/built/netlistsvg.bundle.js"></script>
    <script src="tutorial.js"></script>
    <script src="script.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body class="dark">
    <div id="main-container">
        <!-- Header -->
        <div class="overall-header">
            <div class="header-left"><i class="fas fa-cloud-moon header-button clickable" id="dark-mode-btn"></i></div>
            <div class="logo header-center">Stixu Stick Diagrammer</div>
            <div class="header-right"><i id="open-main-menu-btn" class="fas fa-bars header-button clickable"></i></div>
        </div>
        <!-- Header-END -->

        <section class="main">
            <!-- canvas -->
            <div id="canvas-group-wrapper">
                <div class="canvas-group">
                    <div class="active-layers">
                        <div id="CONTACT"></div>
                        <div id="METAL2" class="cmos-layer"></div>
                        <div id="METAL1" class="cmos-layer"></div>
                        <div id="POLY"   class="cmos-layer"></div>
                        <div id="DIFF"   class="cmos-layer"></div>
                    </div>
                    <div id="canvas-wrapper" class="canvas-wrapper">
                        <div id="pullup-pulldown-warning" class="pullup-pulldown-warning">N pull-up or P pull-down detected. Simulation may be inaccurate.</div>
                        <canvas id="canvas"></canvas>
                        <canvas id="grid-canvas"></canvas>
                    </div>
                </div>
            </div>
            <!-- canvas end -->

        <!-- Right-side -->
            <section class="controls">

            <!-- Edit-open -->
            <div id="terminal-menu" class="edit-open closed">
                <i class="fas fa-times clickable" id="close-terminal-menu-btn"></i>
                <div class="terminal">
                    <h3>Manage Terminals</h3>
                    <div id="termselect-list" class="terminal-select">
                        <!-- AUTO -->
                    </div>
                    <div class="terminal-select2">
                        <div class="select-content" id="remove-input-btn">
                            <i class="fas fa-minus terminalBtn clickable"></i><span class="small">Delete an Input</span>
                        </div>
                        <div class="select-content" id="add-input-btn">
                            <i class="fas fa-plus terminalBtn clickable"></i><span class="small">Add an Input</span>
                        </div>
                        <div class="select-content" id="place-term-btn">
                            <i class="fas fa-map-pin terminalBtn clickable"></i><span class="small">Place Terminal</span>
                        </div>
                        <div class="select-content" id="remove-output-btn">
                            <i class="fas fa-minus terminalBtn clickable"></i><span class="small">Delete an Output</span>
                        </div>
                        <div class="select-content" id="add-output-btn">
                            <i class="fas fa-plus terminalBtn clickable"></i><span class="small">Add an Output</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Edit-open-end -->

                <!-- colorBtn -->
                <div class="colorChange" id="colorChange">
                    <i class="fas fa-circle clickable" id="pdiff-swatch"></i>
                    <i class="fas fa-circle clickable" id="ndiff-swatch"></i>
                    <i class="fas fa-circle clickable" id="poly-swatch"></i>
                    <i class="fas fa-circle clickable" id="metal1-swatch"></i>
                    <i class="fas fa-circle clickable" id="metal2-swatch"></i>
                    <i class="fas fa-circle clickable" id="contact-swatch"></i>
                </div>
                <!-- colorBtn END -->

                <!-- Edit-section -->
                <div class="edit-btn">
                    <div class="edit-btn-content small">
                        <i id="undo-btn" class="fas fa-undo edit-back clickable small"></i>
                    </div>
                    <div class="edit-btn-content">
                        <i id="paint-mode-btn" class="fas fa-paint-brush edit-back clickable"></i>
                        <h5>Paint/Erase</h5>
                    </div>
                    <div class="edit-btn-content">
                        <i id="open-terminal-menu-btn" class="fas fa-edit edit-back clickable"></i>
                        <h5>Terminals</h5>
                    </div>
                    <div class="edit-btn-content small">
                        <i id="redo-btn" class="fas fa-redo edit-back clickable small"></i>
                    </div>
                </div>
                <!-- Edit-section-END -->
                <div class="offscreen">
                    <div class="rowBtn-1">
                        <!-- row-btn -->
                        <div class="rowBtn">
                            <div class="row-content">
                                <h3>Rows: <span id="num-rows"><!-- AUTO --></span></h3>
                            </div>
                            <div class="row-icon">
                                <i class="fas fa-plus icon-back clickable" id="add-row"></i>
                                <i class="fas fa-minus icon-back clickable" id="remove-row"></i>
                            </div>
                        </div>
                        <!-- colum-btn -->
                        <div class="rowBtn">
                            <div class="row-content">
                                <h3>Cols: <span id="num-cols"><!-- AUTO --></span></h3>
                            </div>
                            <div class="row-icon">
                                <i class="fas fa-plus icon-back clickable" id="add-column"></i>
                                <i class="fas fa-minus icon-back clickable" id="remove-column"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Shift grid-btn -->
                    <div class="rowBtn-2">
                        <div class="row-content">
                            <h3>Shift grid</h3>
                        </div>
                        <div class="row-icon">
                            <i class="fas fa-chevron-left icon-back clickable" id="shift-left"></i>
                            <i class="fas fa-chevron-up icon-back clickable" id="shift-up" ></i>
                            <i class="fas fa-chevron-down icon-back clickable" id="shift-down"></i>
                            <i class="fas fa-chevron-right icon-back clickable" id="shift-right"></i>
                        </div>
                    </div>

                    <div class="evaluate-btn clickable" id="evaluate-btn">Evaluate</div>
                    
                    <section class="truth-table-section">
                        <div id="truth-table-container">
                            <table id="truth-table"></table>
                        </div>
                    </section>
                    <div id="results"><!-- AUTO --></div>
                </div>
            </section>
            <!-- Right-side-END -->
        </section>
    </div>

    <!-- Main-Menu -->
    <section class="menu scrollable closed" id="main-menu">
        <i class="fas fa-times clickable" id="close-main-menu-btn"></i>

        <div class="menu-content">
            <ul>
                <li class="clickable" id="open-tutorials-btn">Tutorials</li>
                <li class="clickable" id="open-instructions-btn">Instructions</li>
                <li class="clickable" id="open-about-page-btn">About</li>
                <li class="clickable"><a href="mailto:nick.overacker@okstate.edu">Bug Report</a></li>
                <li class="clickable"><a href="mailto:nick.overacker@okstate.edu">Contact</a></li>
            </ul>

            <div class="menu-btn-content">
                <div class="box-btn clickable options-btn" id="open-options-menu-btn">
                    <i class="fas fa-cogs menu-text">
                        <span>&nbsp;Option</span>
                    </i>
                </div>
                <!--<div class="teacher-btn clickable"><i class="fas fa-glasses menu-text"><span>&nbsp;Teacher Mode</span></i></div>-->
                <h1>Support this project!</h1>
                <div class="box-btn clickable">
                    <a href="https://patreon.com/twentynine" target="_blank">
                        <i class="fab fa-patreon menu-text">
                            <span>&nbsp;Patron</span>
                        </i>
                    </a>
                </div>
                <div class="box-btn clickable">
                    <a href="https://ko-fi.com/twentynine" target="_blank">
                        <i class="fas fa-coffee menu-text">
                            <span>&nbsp;Ko-Fi</span>
                        </i>
                    </a>
                </div>
            </div>
        </div>
    </section>
    <!-- Main-menu-end -->

    <section class="menu scrollable closed" id="tutorials">
        <i class="fas fa-times clickable" id="close-tutorials-btn"></i>
        <div class="menu-content">
            <ul>
                <li class="clickable" id="tutorial-btn-0">The Basics</li>
            </ul>
        </div>
    </section>

    <section class="menu scrollable closed column-flex" id="instructions">
        <i class="fas fa-times clickable" id="close-instructions-btn"></i>

        <section class="menu-long-text desktop">
            <div id="keymappings">
                <h3>Keyboard Shortcuts</h3>
                <button id="keymap-button">Remap</button>
                <table>
                    <thead>
                        <tr>
                            <th>Action</th>
                            <th>Current</th>
                            <th><kbd><kbd>SHIFT</kbd></kbd></th>
                            <th><kbd><kbd>CTRL</kbd></kbd></th>
                            <th>Key</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td="undo-action-text">Undo</td>
                            <td><kbd id="undo-shortcut"><kbd>CTRL</kbd> + <kbd>Z</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-undo" disabled></td>
                            <td><input type="checkbox" id="ctrl-undo" checked disabled></td>
                            <td><input type="text" id="undo-keymap" maxlength="1" value="Z" disabled></td>
                        </tr>
                        <tr>
                            <td id="redo-action-text">Redo</td>
                            <td><kbd id="redo-shortcut"><kbd>CTRL</kbd> + <kbd>Y</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-redo" disabled></td>
                            <td><input type="checkbox" id="ctrl-redo" checked disabled></td>
                            <td><input type="text" id="redo-keymap" value="Y" disabled></td>
                        </tr>
                        <tr>
                            <td id="exit-action-text">Exit menu</td>
                            <td><kbd id="exit-shortcut"><kbd>ESC</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-exit" disabled></td>
                            <td><input type="checkbox" id="ctrl-exit" disabled></td>
                            <td><input type="text" id="exit-keymap" value="ESC" disabled></td>
                        </tr>
                        <tr>
                            <td id="eval-action-text">Evaluate diagram</td>
                            <td><kbd id="eval-shortcut"><kbd>ENTER</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-eval" disabled></td>
                            <td><input type="checkbox" id="ctrl-eval" disabled></td>
                            <td><input type="text" id="eval-keymap" value="ENTER" disabled></td>
                        </tr>
                        <tr>
                            <td id="vdd-action-text">Place VDD terminal</td>
                            <td><kbd id="vdd-shortcut"><kbd>SHIFT</kbd> + <kbd>V</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-vdd"></td>
                            <td><input type="checkbox" id="ctrl-vdd"></td>
                            <td><input type="text" id="vdd-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="gnd-action-text">Place GND terminal</td>
                            <td><kbd id="gnd-shortcut"><kbd>SHIFT</kbd> + <kbd>G</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-gnd"></td>
                            <td><input type="checkbox" id="ctrl-gnd"></td>
                            <td><input type="text" id="gnd-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="addinput-action-text">Add input terminal</td>
                            <td><kbd id="addinput-shortcut"><kbd>I</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-addinput"></td>
                            <td><input type="checkbox" id="ctrl-addinput"></td>
                            <td><input type="text" id="addinput-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="addoutput-action-text">Add output terminal</td>
                            <td><kbd id="addoutput-shortcut"><kbd>O</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-addoutput"></td>
                            <td><input type="checkbox" id="ctrl-addoutput"></td>
                            <td><input type="text" id="addoutput-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="removeinput-action-text">Remove input terminal</td>
                            <td><kbd id="removeinput-shortcut"><kbd>SHIFT</kbd> + <kbd>I</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-removeinput"></td>
                            <td><input type="checkbox" id="ctrl-removeinput"></td>
                            <td><input type="text" id="removeinput-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="removeoutput-action-text">Remove output terminal</td>
                            <td><kbd id="removeoutput-shortcut"><kbd>SHIFT</kbd> + <kbd>O</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-removeoutput"></td>
                            <td><input type="checkbox" id="ctrl-removeoutput"></td>
                            <td><input type="text" id="removeoutput-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="shiftleft-action-text">Shift diagram left</td>
                            <td><kbd id="shiftleft-shortcut"><kbd>SHIFT</kbd> + <kbd>LEFT</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-shiftleft"></td>
                            <td><input type="checkbox" id="ctrl-shiftleft"></td>
                            <td><input type="text" id="shiftleft-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="shiftright-action-text">Shift diagram right</td>
                            <td><kbd id="undo-shiftright"><kbd>SHIFT</kbd> + <kbd>RIGHT</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-shiftright"></td>
                            <td><input type="checkbox" id="ctrl-shiftright"></td>
                            <td><input type="text" id="shiftright-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="shiftup-action-text">Shift diagram up</td>
                            <td><kbd id="shiftup-shortcut"><kbd>SHIFT</kbd> + <kbd>UP</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-shiftup"></td>
                            <td><input type="checkbox" id="ctrl-shiftup"></td>
                            <td><input type="text" id="shiftup-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="shiftdown-action-text">Shift diagram down</td>
                            <td><kbd id="shiftdown-shortcut"><kbd>SHIFT</kbd> + <kbd>DOWN</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-shiftdown"></td>
                            <td><input type="checkbox" id="ctrl-shiftdown"></td>
                            <td><input type="text" id="shiftdown-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="deletecol-action-text">Delete column</td>
                            <td><kbd id="deletecol-shortcut"><kbd>CTRL</kbd> + <kbd>LEFT</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-deletecol"></td>
                            <td><input type="checkbox" id="ctrl-deletecol"></td>
                            <td><input type="text" id="deletecol-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="deleterow-action-text">Delete row</td>
                            <td><kbd id="deleterow-shortcut"><kbd>CTRL</kbd> + <kbd>UP</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-deleterow"></td>
                            <td><input type="checkbox" id="ctrl-deleterow"></td>
                            <td><input type="text" id="deleterow-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="insertcol-action-text">Insert column</td>
                            <td><kbd id="insertcol-shortcut"><kbd>CTRL</kbd> + <kbd>RIGHT</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-insertcol"></td>
                            <td><input type="checkbox" id="ctrl-insertcol"></td>
                            <td><input type="text" id="insertcol-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="insertrow-action-text">Insert row</td>
                            <td><kbd id="insertrow-shortcut"><kbd>CTRL</kbd> + <kbd>DOWN</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-insertrow"></td>
                            <td><input type="checkbox" id="ctrl-insertrow"></td>
                            <td><input type="text" id="insertrow-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="toggledark-action-text">Toggle dark mode</td>
                            <td><kbd id="toggledark-shortcut"><kbd>SHIFT</kbd> + <kbd>D</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-toggledark"></td>
                            <td><input type="checkbox" id="ctrl-toggledark"></td>
                            <td><input type="text" id="toggledark-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="toggleflat-action-text">Toggle transparency</td>
                            <td><kbd id="toggleflat-shortcut"><kbd>SHIFT</kbd> + <kbd>F</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-toggleflat"></td>
                            <td><input type="checkbox" id="ctrl-toggleflat"></td>
                            <td><input type="text" id="toggleflat-keymap" maxlength="1"></td>
                        </tr>
                        <tr>
                            <td id="cycletheme-action-text">Change color scheme</td>
                            <td><kbd id="cycletheme-shortcut"><kbd>SHIFT</kbd> + <kbd>T</kbd></kbd></td>
                            <td><input type="checkbox" id="shift-cycletheme"></td>
                            <td><input type="checkbox" id="ctrl-cycletheme"></td>
                            <td><input type="text" id="cycletheme-keymap" maxlength="1"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div id="mousemappings">
            <h3>Mouse Controls</h3>
            <table>
                <thead>
                <tr>
                    <th>Action</th>
                    <th><kbd>SHIFT</kbd></th>
                    <th><kbd>CTRL</kbd></th>
                    <th>Left</th>
                    <th>Middle</th>
                    <th>Right</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td id="draw-action-text">Draw active layer</td>
                    <td><input type="checkbox" id="shift-draw"></td>
                    <td><input type="checkbox" id="ctrl-draw"></td>
                    <td><input type="radio" id="draw-left-click" name="draw-mapping" value="left-click" checked></td>
                    <td><input type="radio" id="draw-middle-click" name="draw-mapping" value="middle-click"></td>
                    <td><input type="radio" id="draw-right-click" name="draw-mapping" value="right-click"></td>
                </tr>
                <tr>
                    <td id="erase-action-text">Erase all layers / Cycle to next layer</td>
                    <td><input type="checkbox" id="shift-erase"></td>
                    <td><input type="checkbox" id="ctrl-erase"></td>
                    <td><input type="radio" id="erase-left-click" name="erase-mapping" value="left-click"></td>
                    <td><input type="radio" id="erase-middle-click" name="erase-mapping" value="middle-click"></td>
                    <td><input type="radio" id="erase-right-click" name="erase-mapping" value="right-click" checked></td>
                </tr>
                </tbody>
            </table>
            </div>
        </section>

        <section class="menu-long-text">
            <h1>Basic Touch-Friendly Controls</h1>
            <ul>
                <li>Tap the Paint <i class="fas fa-paint-brush inline"></i>
                    or Erase <i class="fas fa-eraser inline"></i>
                    icon to switch between paint and erase mode.</li>
                <li>Tap to paint or clear a cell with the selected layer.
                    <ul><li>Touch and drag to paint a line or clear an area.</li></ul>
                </li>

                <li>Tap one of the colored circles to change paint layers.
                    <ul><li>The layer name is displayed at the top of the canvas.</li></ul>
                </li>

                <li>Tap the Terminal menu button <i class="fas fa-edit inline"></i> to edit I/O terminals.
                    <ul>
                        <li>Use the <i class="fas fa-minus inline"></i> and <i class="fas fa-plus inline"></i> buttons to remove and add terminals.
                            <ul>
                                <li>The buttons on the left control input terminals.</li>
                                <li>The buttons on the right control output terminals.</li>
                            </ul>
                        </li>
                        <li>Select a terminal from the list and tap the <i class="fas fa-map-pin inline"></i> button to enter terminal placement mode.
                            <ul>
                                <li>Tap any cell in the canvas to place the terminal.</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>Scroll down and tap "Evaluate" to generate a truth table for the painted diagram.</li>
                <li>Tap any output value in the truth table to highlight the evaluated path to the output.
                    <ul><li>Not all paths are evaluated for overdriven (simultaneously high and low) outputs.</li></ul>
                </li>
            </ul>
        </section>
    </section>

    <section class="menu scrollable closed" id="about-page">
        <i class="fas fa-times clickable" id="close-about-page-btn"></i>
        <div class="menu-long-text">
            <h1>About Stixu</h1>
            <span>Stixu is a tool for designing and validating CMOS logic circuits.
            <br><br>
            The tool was conceived and developed by Nick Overacker, an Oklahoma State University Computer Engineering graduate currently living in Japan.
            <br><br>
            The user interface was designed and implemented with the help of Miho Kobayashi, a Kansai Gaidai University graduate, former OSU exchange student, and freelance web designer.
            <br><br>
            The default canvas palette was borrowed from <a href="https://personal.sron.nl/~pault/" target="_blank">Paul Tol's</a> work.
            <br><br>
            The alternate "Sorcery" palette was inspired by the <a href="http://opencircuitdesign.com/magic/" target="_blank">Magic</a> VLSI layout tool.
            </span>
        
        </div>
    </section>

    <section class="menu scrollable closed" id="options-menu">
        <i class="fas fa-times clickable" id="close-options-menu-btn"></i>
        <div class="menu-content">
            <ul>
                <li class="clickable" id="select-palette-btn">Palette: <span id="palette-setting">Tol</span></li>
                <li class="clickable" id="toggle-transparency-btn">Layer transparency: <span id="transparency-setting">ON</span></li>
            </ul>
        </div>
    </section>

</body>
</html>